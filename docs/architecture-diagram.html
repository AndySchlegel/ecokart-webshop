<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIR LEGACY - AWS Architecture</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            font-size: 24px;
            margin-bottom: 30px;
            color: #1e293b;
        }

        svg {
            width: 100%;
            height: auto;
            display: block;
        }

        .layer-label {
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .service-label {
            font-size: 10px;
            font-weight: 600;
        }

        .connection-label {
            font-size: 8px;
            font-weight: 600;
        }

        .domain-label {
            font-size: 9px;
            font-weight: 500;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>AIR LEGACY E-Commerce Platform - AWS Architecture</h1>

        <svg viewBox="0 0 1600 980" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <defs>
                <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <path d="M0,0 L0,6 L9,3 z" fill="#2563eb"/>
                </marker>
                <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <path d="M0,0 L0,6 L9,3 z" fill="#10b981"/>
                </marker>
                <marker id="arrow-orange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <path d="M0,0 L0,6 L9,3 z" fill="#f97316"/>
                </marker>
            </defs>

            <!-- ===== LAYER BACKGROUNDS ===== -->

            <!-- Deployment Layer -->
            <rect x="40" y="20" width="1520" height="110" rx="8" fill="#fef2f2" opacity="0.5" stroke="#ef4444" stroke-width="1.5"/>
            <text x="800" y="45" text-anchor="middle" class="layer-label" fill="#991b1b">DEPLOYMENT & CI/CD PIPELINE</text>

            <!-- Frontend Layer -->
            <rect x="40" y="160" width="1520" height="120" rx="8" fill="#fef3c7" opacity="0.5" stroke="#f59e0b" stroke-width="1.5"/>
            <text x="800" y="185" text-anchor="middle" class="layer-label" fill="#92400e">FRONTEND LAYER</text>

            <!-- API & Auth Layer -->
            <rect x="40" y="310" width="1520" height="150" rx="8" fill="#dbeafe" opacity="0.5" stroke="#3b82f6" stroke-width="1.5"/>
            <text x="800" y="335" text-anchor="middle" class="layer-label" fill="#1e40af">API & AUTHENTICATION LAYER</text>

            <!-- Backend & Data Layer -->
            <rect x="40" y="490" width="1520" height="180" rx="8" fill="#d1fae5" opacity="0.5" stroke="#10b981" stroke-width="1.5"/>
            <text x="800" y="515" text-anchor="middle" class="layer-label" fill="#065f46">BACKEND & DATA LAYER</text>

            <!-- External Services Layer -->
            <rect x="40" y="700" width="1520" height="110" rx="8" fill="#f3e8ff" opacity="0.5" stroke="#a855f7" stroke-width="1.5"/>
            <text x="800" y="725" text-anchor="middle" class="layer-label" fill="#6b21a8">EXTERNAL SERVICES</text>

            <!-- Supporting Services -->
            <rect x="40" y="840" width="1520" height="120" rx="8" fill="#f1f5f9" opacity="0.5" stroke="#64748b" stroke-width="1.5"/>
            <text x="800" y="865" text-anchor="middle" class="layer-label" fill="#334155">SUPPORTING SERVICES</text>

            <!-- ===== CI/CD PIPELINE FLOWS ===== -->

            <line x1="280" y1="85" x2="430" y2="85" stroke="#f97316" stroke-width="2.5" marker-end="url(#arrow-orange)"/>
            <text x="355" y="75" class="connection-label" fill="#c2410c">git push</text>

            <line x1="510" y1="85" x2="630" y2="85" stroke="#f97316" stroke-width="2.5" marker-end="url(#arrow-orange)"/>
            <text x="570" y="75" class="connection-label" fill="#c2410c">trigger</text>

            <line x1="1030" y1="85" x2="1180" y2="85" stroke="#10b981" stroke-width="2.5" marker-end="url(#arrow-green)"/>
            <text x="1105" y="75" class="connection-label" fill="#059669">pass ‚úì</text>

            <!-- ===== FRONTEND LAYER FLOWS ===== -->

            <!-- Customer to Shop -->
            <line x1="640" y1="220" x2="300" y2="220" stroke="#2563eb" stroke-width="2.5" marker-end="url(#arrow)"/>
            <text x="470" y="210" class="connection-label" fill="#1e40af">browse</text>

            <!-- Admin to Admin -->
            <line x1="760" y1="220" x2="1080" y2="220" stroke="#2563eb" stroke-width="2.5" marker-end="url(#arrow)"/>
            <text x="920" y="210" class="connection-label" fill="#1e40af">manage</text>

            <!-- ===== FRONTENDS TO ROUTE53 ===== -->

            <!-- Shop to Route53 -->
            <line x1="270" y1="255" x2="270" y2="370" stroke="#2563eb" stroke-width="2.5" marker-end="url(#arrow)"/>

            <!-- Admin to Route53 -->
            <line x1="1110" y1="255" x2="1110" y2="295" stroke="#2563eb" stroke-width="2" stroke-dasharray="4,3"/>
            <line x1="1110" y1="295" x2="300" y2="295" stroke="#2563eb" stroke-width="2" stroke-dasharray="4,3"/>
            <line x1="300" y1="295" x2="300" y2="370" stroke="#2563eb" stroke-width="2" stroke-dasharray="4,3" marker-end="url(#arrow)"/>

            <!-- ===== API LAYER FLOWS ===== -->

            <!-- Route53 to CloudFront (for CDN/Assets) -->
            <line x1="330" y1="385" x2="450" y2="385" stroke="#2563eb" stroke-width="2" stroke-dasharray="4,3" marker-end="url(#arrow)"/>
            <text x="390" y="375" class="connection-label" fill="#1e40af">CDN</text>

            <!-- Route53 to API Gateway (for REST API) -->
            <line x1="330" y1="405" x2="650" y2="405" stroke="#2563eb" stroke-width="2.5" marker-end="url(#arrow)"/>
            <text x="460" y="395" class="connection-label" fill="#1e40af">REST API</text>

            <!-- CloudFront to S3 (vertical down, dann horizontal right) -->
            <line x1="480" y1="425" x2="480" y2="590" stroke="#2563eb" stroke-width="2"/>
            <line x1="480" y1="590" x2="1230" y2="590" stroke="#2563eb" stroke-width="2" marker-end="url(#arrow)"/>
            <text x="855" y="580" class="connection-label" fill="#1e40af">Product Images</text>

            <!-- API Gateway to Lambda (vertical down) -->
            <line x1="680" y1="440" x2="680" y2="560" stroke="#2563eb" stroke-width="2.5" marker-end="url(#arrow)"/>
            <text x="695" y="500" class="connection-label" fill="#1e40af">invoke</text>

            <!-- API Gateway to Cognito (horizontal) -->
            <line x1="740" y1="405" x2="950" y2="405" stroke="#10b981" stroke-width="2" stroke-dasharray="6,4" marker-end="url(#arrow-green)"/>
            <text x="845" y="395" class="connection-label" fill="#059669">Auth</text>

            <!-- ===== BACKEND LAYER FLOWS ===== -->

            <!-- Lambda to DynamoDB -->
            <line x1="620" y1="595" x2="340" y2="595" stroke="#2563eb" stroke-width="2.5" marker-end="url(#arrow)"/>
            <text x="480" y="585" class="connection-label" fill="#1e40af">CRUD</text>

            <!-- Lambda to Cognito (verify JWT) -->
            <line x1="740" y1="595" x2="920" y2="595" stroke="#10b981" stroke-width="2" stroke-dasharray="6,4"/>
            <line x1="920" y1="595" x2="920" y2="440" stroke="#10b981" stroke-width="2" stroke-dasharray="6,4" marker-end="url(#arrow-green)"/>
            <text x="830" y="585" class="connection-label" fill="#059669">Verify JWT</text>

            <!-- Lambda to S3 (upload) -->
            <line x1="740" y1="610" x2="1230" y2="610" stroke="#2563eb" stroke-width="2" marker-end="url(#arrow)"/>
            <text x="985" y="600" class="connection-label" fill="#1e40af">Upload</text>

            <!-- Lambda to EventBridge -->
            <line x1="620" y1="630" x2="490" y2="630" stroke="#2563eb" stroke-width="2" marker-end="url(#arrow)"/>
            <text x="555" y="620" class="connection-label" fill="#1e40af">Events</text>

            <!-- Lambda to CloudWatch -->
            <line x1="740" y1="630" x2="870" y2="630" stroke="#2563eb" stroke-width="2" marker-end="url(#arrow)"/>
            <text x="805" y="620" class="connection-label" fill="#1e40af">Logs</text>

            <!-- ===== EXTERNAL SERVICES FLOWS ===== -->

            <!-- Lambda to Resend (separate path) -->
            <line x1="630" y1="650" x2="630" y2="755" stroke="#2563eb" stroke-width="2"/>
            <line x1="630" y1="755" x2="750" y2="755" stroke="#2563eb" stroke-width="2.5" marker-end="url(#arrow)"/>
            <text x="690" y="745" class="connection-label" fill="#1e40af">Order Email</text>

            <!-- Lambda to Stripe (separate path) -->
            <line x1="730" y1="650" x2="730" y2="755" stroke="#2563eb" stroke-width="2"/>
            <line x1="730" y1="755" x2="1050" y2="755" stroke="#2563eb" stroke-width="2.5" marker-end="url(#arrow)"/>
            <text x="890" y="745" class="connection-label" fill="#1e40af">Payment</text>

            <!-- ===== SUPPORTING SERVICES FLOWS ===== -->

            <!-- EventBridge to SNS -->
            <line x1="460" y1="660" x2="460" y2="890" stroke="#2563eb" stroke-width="2" stroke-dasharray="4,3" marker-end="url(#arrow)"/>
            <text x="475" y="775" class="connection-label" fill="#1e40af">Security Events</text>

            <!-- CloudWatch to SNS -->
            <line x1="900" y1="660" x2="900" y2="845" stroke="#2563eb" stroke-width="2" stroke-dasharray="4,3"/>
            <line x1="900" y1="845" x2="520" y2="845" stroke="#2563eb" stroke-width="2" stroke-dasharray="4,3"/>
            <line x1="520" y1="845" x2="520" y2="890" stroke="#2563eb" stroke-width="2" stroke-dasharray="4,3" marker-end="url(#arrow)"/>
            <text x="710" y="835" class="connection-label" fill="#1e40af">Alarms</text>

            <!-- ===== ICONS & SERVICES ===== -->

            <!-- CI/CD LAYER -->
            <rect x="230" y="60" width="50" height="50" rx="6" fill="#24292e"/>
            <text x="255" y="92" text-anchor="middle" font-size="28" fill="white">‚öô</text>
            <text x="255" y="123" text-anchor="middle" class="service-label">GitHub</text>

            <rect x="430" y="60" width="80" height="50" rx="6" fill="#2088ff"/>
            <text x="470" y="92" text-anchor="middle" font-size="26" fill="white">‚ñ∂</text>
            <text x="470" y="123" text-anchor="middle" class="service-label">GitHub Actions</text>

            <!-- Security Scans Box (CENTERED CONTENT) -->
            <rect x="630" y="60" width="400" height="50" rx="6" fill="#10b981" opacity="0.15" stroke="#10b981" stroke-width="2"/>
            <text x="830" y="82" text-anchor="middle" font-size="9" font-weight="700" fill="#065f46">SECURITY SCANS</text>
            <text x="700" y="99" text-anchor="middle" font-size="8" fill="#065f46" font-weight="600">üîí tfsec</text>
            <text x="830" y="99" text-anchor="middle" font-size="8" fill="#065f46" font-weight="600">üõ°Ô∏è Checkov</text>
            <text x="960" y="99" text-anchor="middle" font-size="8" fill="#065f46" font-weight="600">üîç Trufflehog</text>

            <rect x="1180" y="60" width="80" height="50" rx="6" fill="#7b42bc"/>
            <text x="1220" y="92" text-anchor="middle" font-size="26" fill="white">T</text>
            <text x="1220" y="123" text-anchor="middle" class="service-label">Terraform</text>

            <text x="1360" y="85" font-size="9" fill="#666" font-style="italic">‚Üí Deploys AWS Infrastructure</text>

            <!-- FRONTEND LAYER -->
            <image href="assets/aws-icons/amplify.svg" x="240" y="195" width="60" height="60"/>
            <text x="270" y="268" text-anchor="middle" class="service-label">Amplify Shop</text>
            <text x="270" y="281" text-anchor="middle" class="domain-label" fill="#059669">shop.aws.his4irness23.de</text>

            <!-- Customer (MOVED CLOSER TO ARROW START) -->
            <circle cx="700" cy="220" r="30" fill="#3b82f6"/>
            <circle cx="700" cy="212" r="10" fill="white"/>
            <path d="M683 234 Q683 220 700 220 Q717 220 717 234 Z" fill="white"/>
            <text x="700" y="265" text-anchor="middle" class="service-label">Customer</text>

            <!-- Admin -->
            <circle cx="800" cy="220" r="30" fill="#dc2626"/>
            <circle cx="800" cy="212" r="10" fill="white"/>
            <path d="M783 234 Q783 220 800 220 Q817 220 817 234 Z" fill="white"/>
            <path d="M787 200 L792 206 L800 203 L808 206 L813 200 L811 210 L789 210 Z" fill="#fbbf24"/>
            <text x="800" y="265" text-anchor="middle" class="service-label">Admin</text>

            <image href="assets/aws-icons/amplify.svg" x="1080" y="195" width="60" height="60"/>
            <text x="1110" y="268" text-anchor="middle" class="service-label">Amplify Admin</text>
            <text x="1110" y="281" text-anchor="middle" class="domain-label" fill="#dc2626">admin.aws.his4irness23.de</text>

            <!-- API LAYER -->
            <image href="assets/aws-icons/route53.svg" x="240" y="355" width="60" height="60"/>
            <text x="270" y="428" text-anchor="middle" class="service-label">Route53</text>

            <image href="assets/aws-icons/cloudfront.svg" x="450" y="355" width="60" height="60"/>
            <text x="480" y="428" text-anchor="middle" class="service-label">CloudFront</text>

            <image href="assets/aws-icons/api-gateway.svg" x="650" y="370" width="60" height="60"/>
            <text x="680" y="448" text-anchor="middle" class="service-label">API Gateway</text>
            <text x="680" y="461" text-anchor="middle" class="domain-label" fill="#2563eb">api.aws.his4irness23.de</text>

            <image href="assets/aws-icons/cognito.svg" x="950" y="370" width="60" height="60"/>
            <text x="980" y="448" text-anchor="middle" class="service-label">Cognito</text>
            <text x="980" y="461" text-anchor="middle" font-size="8" fill="#666">User Pool + Admin Group</text>

            <image href="assets/aws-icons/acm.svg" x="1250" y="370" width="60" height="60"/>
            <text x="1280" y="448" text-anchor="middle" class="service-label">ACM</text>
            <text x="1280" y="461" text-anchor="middle" font-size="8" fill="#666">SSL Certificates</text>

            <!-- BACKEND LAYER -->
            <image href="assets/aws-icons/dynamodb.svg" x="280" y="565" width="60" height="60"/>
            <text x="310" y="638" text-anchor="middle" class="service-label">DynamoDB</text>
            <text x="310" y="651" text-anchor="middle" font-size="8" fill="#666">4 Tables ‚Ä¢ 3 GSI</text>

            <image href="assets/aws-icons/eventbridge.svg" x="430" y="600" width="60" height="60"/>
            <text x="460" y="673" text-anchor="middle" class="service-label">EventBridge</text>

            <image href="assets/aws-icons/lambda.svg" x="650" y="560" width="60" height="60"/>
            <text x="680" y="643" text-anchor="middle" class="service-label">Lambda</text>
            <text x="680" y="656" text-anchor="middle" font-size="8" fill="#666">Node.js 20 ‚Ä¢ 16 Functions</text>

            <image href="assets/aws-icons/cloudwatch.svg" x="870" y="600" width="60" height="60"/>
            <text x="900" y="673" text-anchor="middle" class="service-label">CloudWatch</text>

            <image href="assets/aws-icons/s3.svg" x="1230" y="560" width="60" height="60"/>
            <text x="1260" y="643" text-anchor="middle" class="service-label">S3 Bucket</text>
            <text x="1260" y="656" text-anchor="middle" font-size="8" fill="#666">Images + Assets</text>

            <!-- EXTERNAL SERVICES -->
            <rect x="750" y="730" width="70" height="70" rx="8" fill="#0EA5E9"/>
            <text x="785" y="772" text-anchor="middle" font-size="32" fill="white">‚úâ</text>
            <text x="785" y="813" text-anchor="middle" class="service-label">Resend</text>

            <rect x="1050" y="730" width="70" height="70" rx="8" fill="#635BFF"/>
            <text x="1085" y="772" text-anchor="middle" font-size="32" fill="white">üí≥</text>
            <text x="1085" y="813" text-anchor="middle" class="service-label">Stripe</text>

            <!-- SUPPORTING SERVICES (SNS INSIDE BOX) -->
            <image href="assets/aws-icons/sns.svg" x="420" y="890" width="80" height="80"/>
            <text x="460" y="978" text-anchor="middle" class="service-label" font-size="11">SNS</text>
            <text x="460" y="991" text-anchor="middle" font-size="8" fill="#666">Security Notifications</text>
        </svg>
    </div>
</body>
</html>
